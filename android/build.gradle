apply plugin: "com.android.library"
apply plugin: "org.jetbrains.kotlin.android"
apply plugin: "com.facebook.react"

// Expo plugin - START
def expoModulesCorePlugin = new File(project(":expo-modules-core").projectDir.absolutePath, "ExpoModulesCorePlugin.gradle")
apply from: expoModulesCorePlugin
applyKotlinExpoModulesCorePlugin()
useCoreDependencies()
useExpoPublishing()
// Expo plugin - END */

buildscript {
  // Simple helper that allows the root project to override versions declared by this library.
  ext.safeExtGet = { prop, fallback ->
    rootProject.ext.has(prop) ? rootProject.ext.get(prop) : fallback
  }
}
project.android {
  compileSdkVersion safeExtGet("compileSdkVersion", 36)
  defaultConfig {
    minSdkVersion safeExtGet("minSdkVersion", 24)
    targetSdkVersion safeExtGet("targetSdkVersion", 36)
  }
}

android {
  namespace "com.emarsys.reactnative"
  defaultConfig {
    versionCode 1
    versionName "0.0.1"
  }
  kotlinOptions {
    jvmTarget = '17'
  }
  lintOptions {
    abortOnError false
  }
}

tasks.withType(Test) {
  testLogging {
    events "passed", "skipped", "failed"
    exceptionFormat "full"
    showStandardStreams = true
  }
}

dependencies {
  implementation "androidx.core:core-ktx:1.16.0"
  implementation "com.facebook.react:react-native:+"
  api "com.emarsys:emarsys-sdk:3.10.+"
  api "com.emarsys:emarsys-firebase:3.10.+"
  
  // Test dependencies
  testImplementation "junit:junit:4.13.2"
  testImplementation "io.mockk:mockk:1.13.8"
  testImplementation "org.jetbrains.kotlin:kotlin-test-junit:1.9.20"
}
